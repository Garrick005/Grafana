# Домашнее задание к занятию «Микросервисы: подходы»

## Задача 1: Обеспечить разработку

Оптимальный выбор: GitLab.com + GitLab CI/CD + self-hosted GitLab Runner. Решение полностью удовлетворяет всем требованиям, минимизируя потребность в дополнительных инструментах.

- Встроенный CI/CD, не требующий дополнительных сервисов.
- Поддержка сложных пайплайнов и шаблонов.
- Возможность использовать агентов на своих серверах.
- Контейнерный регистр для собственных Docker-образов.
- Богатая конфигурация запуска сборок, изоляция окружений и безопасное хранение секретов.
- Масштабируется без ограничений.

## Задача 2:

Оптимальный выбор это ELK-Stack:

- Elasticsearch: Распределенная поисковая и аналитическая система, которая быстро обрабатывает большие объемы данных в реальном времени. 
- Logstash: Компонент для извлечения данных из различных источников, их фильтрации, преобразования и последующей отправки в Elasticsearch. 
- Kibana: Инструмент, позволяющий просматривать, анализировать и визуализировать данные из Elasticsearch, создавать дашборды и отчеты. 

## Задача 3:

Решение для мониторинга микросервисной архитектуры, удовлетворяющее всем требованиям: Prometheus + Grafana + Node Exporter + cAdvisor + сервисные экспортеры (или встроенные метрики).

1. Prometheus — центральная система сбора метрик

Prometheus выполняет роль ядра, которое периодически опрашивает все источники метрик (pull-модель). Он хранит данные в таймсериях и предоставляет язык запросов PromQL для анализа.

2. Сбор метрик с хостов: Node Exporter

Каждый хост (bare-metal или VM) запускает Node Exporter для сбора метрик:
- CPU (нагрузка, irq, idle, context-switches)
- RAM (вся память, swap, allocation)
- HDD (IOPS, latency, throughput, filesystem usage)
- Network (tX/rX, ошибки, дропы)

3. Сбор метрик о потреблении ресурсов сервисами: cAdvisor / Kubernetes Metrics

Если инфраструктура использует контейнеризацию используется cAdvisor (или встроенные метрики kubelet), который предоставляет:
- CPU usage per container
- Memory usage per container
- Disk I/O per container
- Network usage per container

Для Kubernetes — эти метрики автоматически доступны через kubelet/cAdvisor без дополнительной настройки.

4. Интерфейс пользователя и аналитика: Grafana -визуализация данных + Garafana Alerts для оповещения об ошибках.




